<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BIET Enquiry Bot ‚Äî Bapuji Institute of Engineering & Technology</title>
<meta name="description" content="BIET Davangere enquiry chatbot ‚Äî courses, admissions, HODs, placements, contact and more." />
<style>
  :root{
    --bg: #f3f7ff;
    --card: #ffffff;
    --primary: #0b4b84;
    --accent: #0f6fb2;
    --muted: #6b7280;
    --user-bubble: #dcf8c6;
    --bot-bubble: #ffffff;
    --glass: rgba(255,255,255,0.6);
    --radius: 14px;
    color-scheme: light;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  [data-theme="dark"]{
    --bg: #07101a;
    --card:#071824;
    --primary:#6fb7ff;
    --accent:#9ad1ff;
    --muted:#93a6b4;
    --user-bubble:#06303e;
    --bot-bubble:#0b2a3a;
    color-scheme: dark;
  }

  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),rgba(255,255,255,0.02));-webkit-font-smoothing:antialiased;}
  .page {
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
  }

  /* Card */
  .app {
    width:100%;
    max-width:920px;
    border-radius:18px;
    background:linear-gradient(180deg, rgba(255,255,255,0.6), var(--card));
    box-shadow: 0 20px 60px rgba(3,10,25,0.18);
    overflow:hidden;
    display:grid;
    grid-template-columns: 380px 1fr;
    min-height:70vh;
  }

  /* Left panel (info + quick links) */
  .left {
    padding:20px;
    background: linear-gradient(180deg, var(--primary), var(--accent));
    color:white;
    display:flex;
    flex-direction:column;
    gap:14px;
  }
  .brand {
    display:flex;
    gap:12px;
    align-items:center;
  }
  .brand img { width:52px; height:52px; border-radius:10px; background:white; padding:6px; box-shadow:0 8px 24px rgba(0,0,0,0.12); }
  .brand h2{ margin:0; font-size:18px; line-height:1; font-weight:700; }
  .brand p{ margin:0; font-size:12px; opacity:0.95; }

  .info {
    background: rgba(255,255,255,0.06);
    padding:12px;
    border-radius:12px;
    font-size:13px;
    line-height:1.4;
  }

  .quick-list {
    display:flex;
    gap:8px;
    flex-wrap:wrap;
  }
  .quick-list button {
    background: rgba(255,255,255,0.12);
    border:1px solid rgba(255,255,255,0.08);
    color:white;
    padding:8px 10px;
    border-radius:999px;
    cursor:pointer;
    font-size:13px;
  }

  .meta { font-size:12px; opacity:0.9; }

  /* Right panel (chat) */
  .right {
    padding:18px;
    display:flex;
    flex-direction:column;
    gap:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
  }

  .top-row {
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
  }
  .title {
    display:flex;
    flex-direction:column;
  }
  .title h3{ margin:0; font-size:18px; color:var(--primary); }
  .title p{ margin:0; font-size:13px; color:var(--muted); }

  .controls { display:flex; gap:8px; align-items:center; }

  .btn {
    border: none;
    background:var(--primary);
    color:white;
    padding:8px 10px;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
  }
  .btn.secondary{ background:transparent; color:var(--primary); border:1px solid rgba(11,75,132,0.08); }

  .chat-area {
    display:flex;
    flex-direction:column;
    gap:10px;
    height: calc(70vh - 120px);
    min-height:300px;
  }
  .messages {
    flex:1;
    overflow:auto;
    padding:8px;
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  .bubble {
    max-width:76%;
    padding:10px 14px;
    border-radius:16px;
    line-height:1.3;
    box-shadow: 0 6px 20px rgba(2,6,23,0.04);
    word-wrap:break-word;
  }
  .bubble.bot {
    background:var(--bot-bubble);
    color:var(--primary);
    align-self:flex-start;
    border-top-left-radius:6px;
  }
  .bubble.user {
    background:var(--user-bubble);
    color: #0b4b84;
    align-self:flex-end;
    border-top-right-radius:6px;
  }
  .typing { opacity:0.7; font-style:italic; }

  .input-row {
    display:flex;
    gap:10px;
    align-items:center;
  }
  .input {
    flex:1;
    display:flex;
    align-items:center;
    gap:8px;
    background:var(--card);
    padding:10px;
    border-radius:12px;
    border:1px solid rgba(11,75,132,0.06);
  }
  .input input {
    width:100%;
    border:0; outline:0; font-size:15px; background:transparent;
    color:inherit;
  }

  .icon {
    width:40px; height:40px; display:inline-flex; align-items:center; justify-content:center;
    border-radius:10px; cursor:pointer;
    border:1px solid rgba(11,75,132,0.06);
    background:transparent;
  }

  /* small screens */
  @media (max-width:880px){
    .app{ grid-template-columns: 1fr; }
    .left { order:2; }
    .right { order:1; }
    .chat-area { height:55vh; }
  }

  /* small styling touches */
  .footer-note{ font-size:12px; color:var(--muted); margin-top:6px; }
  a.link{ color:var(--primary); text-decoration:none; font-weight:600; }
</style>
</head>
<body>
  <div class="page" id="page">
    <div class="app" id="app">

      <!-- LEFT: Info -->
      <div class="left" role="complementary">
        <div class="brand">
          <img id="logo" src="" alt="BIET Logo" />
          <div>
            <h2>Bapuji Institute of Engineering & Technology</h2>
            <p class="meta">Davangere ‚Äî College Enquiry Bot</p>
          </div>
        </div>

        <div class="info">
          <strong>Quick facts</strong>
          <ul style="margin:8px 0 0 18px; padding:0; font-size:13px;">
            <li>Courses: BE / B.Tech ‚Äî CSE, AIML, CSD, CSBS, IS, Mechanical, Chemical, Textile</li>
            <li>Admission helpline: <strong>1800 731 973</strong></li>
            <li>Placements: TCS, Infosys, Wipro + core recruiters</li>
            <li>Address: BIET Campus, Davangere, Karnataka</li>
          </ul>
        </div>

        <div>
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <strong>Quick actions</strong>
            <small style="opacity:0.9;font-size:12px">Tap to ask</small>
          </div>
          <div class="quick-list" style="margin-top:10px;">
            <button onclick="quick('courses')">Courses</button>
            <button onclick="quick('admission')">Admission</button>
            <button onclick="quick('placement')">Placements</button>
            <button onclick="quick('hostel')">Hostel</button>
            <button onclick="quick('hods')">HODs</button>
            <button onclick="quick('director')">Director</button>
            <button onclick="quick('principal')">Principal</button>
          </div>
        </div>

        <div style="margin-top:auto;">
          <div class="meta">Made for BIET students & applicants</div>
          <div class="footer-note">Tip: Use the mic button to speak (Chrome/Edge recommended)</div>
        </div>
      </div>

      <!-- RIGHT: Chat -->
      <div class="right" role="main">
        <div class="top-row">
          <div class="title">
            <h3>BIET Enquiry Bot</h3>
            <p>Ask anything about courses, admissions, HODs, placements and more.</p>
          </div>

          <div class="controls">
            <button class="btn secondary" id="themeBtn" title="Toggle dark mode">üåô</button>
            <button class="btn secondary" id="helpBtn" title="Contact info">‚ÑπÔ∏è</button>
            <button class="btn" id="clearBtn" title="Clear chat">Clear</button>
          </div>
        </div>

        <div class="chat-area" aria-live="polite">
          <div class="messages" id="messages">
            <!-- initial message -->
            <div class="bubble bot">ü§ñ Hello! I'm the BIET Enquiry Bot ‚Äî ask about courses, admissions, hostel, placements, director, principal, HODs, and administrative roles. Try "courses" or "admission".</div>
          </div>
        </div>

        <div class="input-row">
          <div class="input" role="search">
            <input id="userInput" type="text" placeholder="Type your question (or press üé§)..." aria-label="Type your question" />
            <button class="icon" id="micBtn" title="Voice input">üé§</button>
          </div>
          <button class="btn" id="sendBtn">Send</button>
        </div>
      </div>

    </div>
  </div>

<script>
/* ------------ Configuration ------------ */
/* If you have local logo file in repo root name it "biet_logo.png" and it will load.
   Or set logoUrl to any image URL. */
const logoUrl = 'biet_logo.png'; // change to remote URL if you prefer
document.getElementById('logo').src = logoUrl;

/* ---------- Knowledge base (KB) ---------- */
/* Add or edit items here. keys: array of keywords to match. ans: answer string. */
const KB = [
  {keys:["hi","hello","hey","heyy"], ans:"Hello üëã! Welcome to BIET Enquiry. How can I help you today? üòä"},
  {keys:["thank","thanks","thx"], ans:"You're welcome! If you need anything else, ask away üòä"},
  {keys:["bye","goodbye","see you","ttyl"], ans:"Thank you for visiting BIET! Have a great day üòä"},
  {keys:["course","branch","courses","branches","degree"], ans:"BIET offers BE/B.Tech courses ‚Äî CSE, CSE(AIML), CSD, CSBS, IS (Information Science), Mechanical Engineering, Chemical Engineering, Textile Engineering."},
  {keys:["cse","computer science"], ans:"CSE & allied: CSE, CSE(AIML), CSD, CSBS, Information Science. Good labs and placement support."},
  {keys:["mechanical"], ans:"Mechanical Engineering focuses on design, manufacturing, automation and hands-on labs."},
  {keys:["chemical"], ans:"Chemical Engineering: industrial chemistry, process engineering and manufacturing tech."},
  {keys:["textile"], ans:"Textile Engineering: fabric tech, textile machinery, production & industry exposure."},
  {keys:["admission","apply","application"], ans:"For admissions, visit the BIET campus or call the admission helpline: 1800 731 973. Entrance & eligibility details are on the college website."},
  {keys:["fees","fee","tuition"], ans:"Fee structure varies by program/year. For exact fees contact admissions at 1800 731 973 or visit the college office."},
  {keys:["hostel","accommodation"], ans:"Separate hostels for boys and girls with Wi-Fi, mess facilities, and security."},
  {keys:["placement","placements","recruiters"], ans:"Top recruiters include TCS, Infosys, Wipro and many core engineering companies. Placement support is managed by Training & Placement cell."},
  {keys:["contact","phone","call"], ans:"General contact: 1800 731 973. For specific departments visit the official college website or contact the admin office."},
  {keys:["address","location","where"], ans:"BIET, Davangere, Karnataka. For exact directions use Google Maps or contact the college at 1800 731 973."},
  {keys:["email","mail"], ans:"Official email and department contacts change; please call 1800 731 973 for updated email addresses."},
  {keys:["director"], ans:"Director: Y. Vrushabhendrappa"},
  {keys:["principal"], ans:"Principal: H. B. Aravind"},
  {keys:["dean","deans","administration","administrative roles"], ans:"Senior administrative roles: Deans for Student Welfare, R&D, Academics, Training & Placement, Examinations, Public Relations."},
  {keys:["hod","hods","head","heads","department head"], ans:`Heads of Selected Departments:
Civil Engineering ‚Äî Chidananda G
Mechanical Engineering ‚Äî Manavendra G
CSE ‚Äî C. R. Nirmala (also Dean - Training & Placement)
ECE ‚Äî Sunitha G S
Textile Technology ‚Äî Y. N. Dinesh
Physics ‚Äî Jagadeesh M R
Mathematics ‚Äî K. S. Basavarajappa
Chemistry ‚Äî Prasanakumar J K
Biotechnology ‚Äî G. P. Desai`},
  {keys:["library","books","library timings"], ans:"BIET has a modern library with books, journals and e-resources. For timings contact the college."},
  {keys:["labs","laboratory","practical"], ans:"Well-equipped laboratories for CSE, Mechanical, Chemical and Textile departments for practical learning and projects."}
];

/* ---------- Helper functions ---------- */
const messagesEl = document.getElementById('messages');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const micBtn = document.getElementById('micBtn');
const themeBtn = document.getElementById('themeBtn');
const clearBtn = document.getElementById('clearBtn');
const helpBtn = document.getElementById('helpBtn');

/* Utility: append message bubble */
function appendBubble(text, who='bot', extraClass='') {
  const div = document.createElement('div');
  div.className = 'bubble ' + who + (extraClass?(' '+extraClass):'');
  div.textContent = text;
  messagesEl.appendChild(div);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  return div;
}

/* Find best reply from KB */
function findReply(text) {
  const t = text.toLowerCase();
  // exact greeting/thank/bye priority handled by KB order
  for (const item of KB) {
    for (const k of item.keys) {
      if (t.includes(k)) return item.ans;
    }
  }
  // fallback
  return null;
}

/* Send flow: show user, typing, reply */
function sendMessage(triggerText) {
  const text = (typeof triggerText === 'string') ? triggerText : userInput.value.trim();
  if (!text) return;
  // show user
  appendBubble(text, 'user');
  userInput.value = '';
  // typing
  const typing = appendBubble('ü§ñ Typing...', 'bot', 'typing');
  // simulate thinking
  setTimeout(() => {
    typing.remove();
    const reply = findReply(text);
    if (reply) {
      appendBubble(reply, 'bot');
    } else {
      appendBubble('Sorry, I do not have that information. Please contact BIET at 1800 731 973 for details.', 'bot');
    }
  }, 800 + Math.min(1200, text.length * 20));
}

/* Quick reply helper */
function quick(text){ sendMessage(text); }

/* Keyboard Enter */
userInput.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') { e.preventDefault(); sendMessage(); }
});

/* Send button */
sendBtn.addEventListener('click', () => sendMessage());

/* Clear chat */
clearBtn.addEventListener('click', () => {
  messagesEl.innerHTML = '';
  appendBubble("ü§ñ Hello! I'm the BIET Enquiry Bot ‚Äî ask about courses, admissions, hostel, placements, HODs, director or principal. Try 'courses' or tap a quick button.", 'bot');
});

/* Help button shows contact quick info */
helpBtn.addEventListener('click', () => {
  appendBubble("Contact: 1800 731 973 ‚Ä¢ Admissions: visit BIET campus. For department emails call the main line.", 'bot');
});

/* Theme toggle (persist in sessionStorage) */
function applyTheme(theme){
  document.documentElement.setAttribute('data-theme', theme);
  sessionStorage.setItem('biet_theme', theme);
  themeBtn.textContent = (theme === 'dark') ? '‚òÄÔ∏è' : 'üåô';
}
const savedTheme = sessionStorage.getItem('biet_theme') || 'light';
applyTheme(savedTheme);
themeBtn.addEventListener('click', () => {
  const current = document.documentElement.getAttribute('data-theme') || 'light';
  applyTheme(current === 'light' ? 'dark' : 'light');
});

/* ---------- Voice recognition (Web Speech API) ---------- */
let recognition = null;
function setupSpeech() {
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  if (!SpeechRecognition) {
    micBtn.title = "Voice not supported in this browser";
    micBtn.style.opacity = 0.85;
    return;
  }
  recognition = new SpeechRecognition();
  recognition.lang = 'en-IN';
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;

  recognition.onstart = () => {
    micBtn.textContent = '‚è∫Ô∏è';
    micBtn.title = 'Listening... click to stop';
  };
  recognition.onend = () => {
    micBtn.textContent = 'üé§';
    micBtn.title = 'Voice input';
  };
  recognition.onerror = (e) => {
    appendBubble('Voice input error. Please type your question.', 'bot');
    console.warn('Speech error', e);
  };
  recognition.onresult = (event) => {
    const spoken = event.results[0][0].transcript;
    sendMessage(spoken);
  };

  // mic toggling
  micBtn.addEventListener('click', () => {
    if (!recognition) return;
    try {
      recognition.start();
    } catch(e) {
      // ignore start errors
    }
  });
}
setupSpeech();

/* On load: initial greeting */
window.addEventListener('load', () => {
  // ensure initial bubble exists
  messagesEl.innerHTML = '';
  appendBubble("ü§ñ Hello! I'm the BIET Enquiry Bot ‚Äî ask about courses, admissions, hostel, placements, HODs, director or principal. Try 'courses' or tap a quick button.", 'bot');
});

/* Quick-list functions used in left panel */
window.quick = quick;

/* Make links clickable if any URL appears (simple) */
const observer = new MutationObserver(() => {
  messagesEl.querySelectorAll('.bubble').forEach(b => {
    if (!b.dataset.processed) {
      b.dataset.processed = '1';
      b.innerHTML = b.innerHTML.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank" class="link">$1</a>');
    }
  });
});
observer.observe(messagesEl, { childList:true, subtree:true });

</script>
</body>
</html>
